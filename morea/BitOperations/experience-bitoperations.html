<!DOCTYPE html>
<html>
<head>
  <title> Homework Assignment #6 | ICS 312 Spring 2021 </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <!--  Load bootswatch-based Morea theme file. -->
  <link rel="stylesheet" href="/ics312_spring2021/css/themes/cerulean/bootstrap.min.css">
  <link rel="stylesheet" href="/ics312_spring2021/css/style.css">
  <link rel="stylesheet" href="/ics312_spring2021/css/syntax.css">
  <link rel="shortcut icon" href="/ics312_spring2021/favicon.ico" type="image/x-icon"/>

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.2.0/respond.js"></script>
  <![endif]-->

  <!-- Load Bootstrap JavaScript components -->
  <script src="//code.jquery.com/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

  
  <script type="text/javascript"
          src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  

  <script>
    $(window).load(function () {
      // If on a page associated with a navbar item, make its navbar item 'active'.
      $('.navbar-nav').find('a[href="' + location.pathname + '"]').parents('li').addClass('active');
    });
  </script>

</head>
<body>
<!-- Responsive navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <!--  Display three horizontal lines when navbar collapsed. -->
        <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/ics312_spring2021/index.html"> ICS 312 Spring 2021 </a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        
        <li><a href="/ics312_spring2021/modules/">Modules</a></li>
        
        <li><a href="/ics312_spring2021/outcomes/">Outcomes</a></li>
        
        
        <li><a href="/ics312_spring2021/readings/">Readings</a></li>
        
        
        <li><a href="/ics312_spring2021/experiences/">Experiences</a></li>
        
        
        <li><a href="/ics312_spring2021/assessments/">Assessments</a></li>
        
        
      </ul>
    </div>
  </div>
</div>


<div class="breadcrumb-bar">
  <div class="container">
    <ol class="breadcrumb">
      
      <li><a href="/ics312_spring2021/">Home</a></li>
      <li><a href="/ics312_spring2021/modules">Modules</a></li>
      <li><a href="/ics312_spring2021/modules/"></a></li>
      <li class="active">Homework Assignment #6</li>
    </ol>
  </div>
</div>


<div class="container">
  <h2 id="homework-assignment-6-80-pts">Homework Assignment #6 [80 pts]</h2>

<hr />

<p>You are expected to do your own work on all homework assignments.  You
may (and are encouraged to) engage in <i>general</i> discussions with
your classmates regarding the assignments, but specific details of a
solution, including the solution itself, must always be your
own work. (See the statement of Academic Dishonesty on the
<a href="/ics312_spring2021/morea/GettingStarted/reading-syllabus.html">Syllabus</a>.)</p>

<h4 id="how-to-turn-in">How to turn in?</h4>

<p>Assignments need to be turned in via <a href="https://laulima.hawaii.edu/portal">Laulima</a>. Check the <a href="/ics312_spring2021/morea/GettingStarted/reading-syllabus.html">Syllabus</a> for the late assignment policy for the course.</p>

<h4 id="what-to-turn-in">What to turn in?</h4>

<p>You must turn in a zip archive named <b><tt>ics312_hw6_xxx.zip</tt></b>,
where “xxx” is your UH user name (e.g., for me, it would be
<tt>ics312_hw6_henric.zip</tt>).  The archive <strong>must contain a single
top-level directory</strong> called <tt>ics312_hw6_xxx</tt>, where “xxx” is your
UH user name (e.g., for me, it would be <tt>ics312_hw6_henric</tt>). In
that directory you must have all the files <b>named exactly</b> as
specified in the questions below.</p>

<p><strong>Expected contents of the <tt>ics312_hw6_xxx</tt> directory:</strong></p>

<ul>
  <li><tt>hw6_ex1.asm</tt>: code for Exercise #1</li>
  <li><tt>asm_io.asm</tt>: I/O functions source code</li>
  <li><tt>asm_io.inc</tt>: I/O include file</li>
  <li><tt>driver.c</tt>: C driver</li>
  <li><tt>Makefile</tt>: A makefile that compiles your program into an executable (we must just be able to type “make” and generate your executable). <strong>We will only grade the executable generated by typing “make”.</strong></li>
</ul>

<p><strong>Deviation from the above specs will lead to lost points:</strong></p>

<ul>
  <li>Archive is not a zip archive (-5 pts)</li>
  <li>Archive does not extract as a single directory (-5 pts)</li>
  <li>The name of the directory is incorrect (-5 pts)</li>
  <li>The asm_io.asm file is missing (-5 pts)</li>
  <li>The asm_io.inc file is missing (-5 pts)</li>
  <li>The driver.c file is missing (-5 pts)</li>
  <li>The archive is empty, or doesn’t extract, or does not contain a makefile: no credits for the assignment</li>
</ul>

<hr />

<h3 id="context-and-motivation">Context and Motivation</h3>

<p>As you know, massive amounts of data are increasingly being processed
for many diverse goals. As a result, it’s crucial to not waste bits, so as to make sure data is small. The goal is not only to save on disk/RAM space, but also to save on data processing time. This is because loading data from RAM to the CPU is time consuming.  For instance, say you have a boolean value to store. You can of course use a <tt>byte</tt>  (in Java) or <tt>char</tt> (in C) type, but then you are wasting 7 bits. So if you have to store an array of 1024 such booleans, your data will be 1KiB. That’s 1KiB of data that will have
to be brought from RAM to the CPU for processing.  However, a boolean is <i>by definition</i> encodable on only 1 bit!  So, really, storing 1,024 booleans should require only 1,024 bits, which is 128 bytes, which is 8 times less memory!  So, in the real world, one often <i>packs</i> data into bits to get away from “the smallest data item is 1 byte” constraint.</p>

<h4 id="does-it-all-really-matter">Does it all really matter?</h4>

<p>It depends what you do. But if you do big data analytics you
care about speed because the data is huge.  Just to make this plain, I’ve
implemented Question #3 in our assignment in C using the “array of booleans”
approach (wasting bits) and the “array of bits” approach (not wasting bits
but having to use bitwise operations).  We’ll look at my code 
after the assignment’s due date.  On my laptop, comparing the two
approaches for processing large amounts of data gives the following timing results:</p>

<center>
<table>
<tr><th bgcolor="lightgray">Number of array elements </th><th bgcolor="lightgray">array of booleans</th><th bgcolor="lightgray">array of bits</th></tr>
<tr><td> 2<sup>27</sup> </td><td>2.04 sec</td><td>1.04 sec</td></tr>
<tr><td> 2<sup>30</sup> </td><td>16.19 sec</td><td>7.79 sec</td></tr>
<tr><td> 2<sup>31</sup> </td><td>32.38 sec</td><td>15.99 sec</td></tr>
</table>
<br />
</center>

<p>There is about a factor 2 speedup. In terms of asymptotic complexity
analysis (ICS 311) this is only a constant factor, and so it “doesn’t
matter”. But in practice, this constant factor is the difference between
waiting 1 hour for results or 2 hours, which in many businesses can translate
to a lot of money!</p>

<hr />

<h3 id="exercise-1-bitwise-operations-for-big-data-80-pts">Exercise #1: Bitwise operations for Big Data [80 pts]</h3>

<h4 id="overview">Overview</h4>

<p>Let’s pretend you are working for a company that does big data analysis
based on large human subject datasets (e.g., US Census data, surveys). From
such datasets, boolean features of each person have been extracted that are
relevant for a particular data analysis task. One then wants to ask
question about the data. In this assignment, you’ll write some assembly to
answer such questions.</p>

<p>Each data item in the dataset is a record with 4 booleans:</p>

<ul>
  <li><strong>b1:</strong> true if the person is under 40, false otherwise;</li>
  <li><strong>b2:</strong> true if the person has an Android phone, false if they have an iPhone;</li>
  <li><strong>b3:</strong> true if the person prefers Netflix, false if they prefer Hulu; and</li>
  <li><strong>b4:</strong> true if the person prefers Star Wars, false if they prefer Star Trek</li>
</ul>

<p>You will implement a program, adding features incrementally, that processes data about 8 people, i.e., 8*4 = 32 bits. These 32 bits are provided as keyboard input as an integer. In a real-world scenario, one would of course get the input from a (huge) binary data file.</p>

<h4 id="implementation-constraints">Implementation constraints</h4>

<ul>
  <li><strong>Constraint #1:</strong> Your .data segment must be <strong>exactly</strong> as shown below, otherwise you will get no credit for this  assignment:</li>
</ul>

<figure class="highlight"><pre><code class="language-text" data-lang="text">segment .data
    msg1    db      "Enter an integer: ", 0
    msg2    db      "Binary representation: ", 0
    msg3    db      "Semantic: ", 0
    msg4    db      "YNGR/IPHN/HULU/SWRS count: ", 0
    msg5    db      "*/ANDR/*/STRK count: ", 0
    codes   db      "YNGR", 0, "OLDR", 0, "ANDR", 0, "IPHN", 0, "NFLX", 0, "HULU", 0, "SWRS", 0, "STRK", 0
    four_spaces db  "    ",0</code></pre></figure>

<ul>
  <li><strong>Constraint #2:</strong> Your .bss segment must not reserve more than <strong>8 bytes</strong>, otherwise you will be no credit for this assignment. In my own solution it is as follows:</li>
</ul>

<figure class="highlight"><pre><code class="language-text" data-lang="text">segment .bss
		input	resd  1     ; only 4 bytes! </code></pre></figure>

<p>(but you are allowed to go up to 8 bytes if you want)</p>

<hr />

<h4 id="question-1-printing-binary-representation-of-input-integer-15-pts">Question #1: Printing binary representation of input integer [15 pts]</h4>

<p>Write an assembly program called <tt>hw6_ex1</tt>, with source stored in file
<tt>hw6_ex1.asm</tt>, which prompts the user for an integer, and prints out its
32-bit binary representation with a white space every 4 digits. You can assume that the user always enters a valid 32-bit integer.</p>

<p>Here are example interactions with the program, which you should match:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">% ./hw6_ex1 
Enter an integer: 15
Binary representation: 0000 0000 0000 0000 0000 0000 0000 1111 
% ./hw6_ex1 
Enter an integer: -3124
Binary representation: 1111 1111 1111 1111 1111 0011 1100 1100 
% ./hw6_ex1 
Enter an integer: -1
Binary representation: 1111 1111 1111 1111 1111 1111 1111 1111 
% ./hw6_ex1
Enter an integer: 512331
Binary representation: 0000 0000 0000 0111 1101 0001 0100 1011 </code></pre></figure>

<hr />

<h4 id="question-2-printing-semantics-of-input-integer-15-pts">Question #2: Printing semantics of input integer [15 pts]</h4>

<p>Augment your program so that it also prints the <em>semantics</em> of the input integer,
i.e., its meaning in terms of describing 8 persons in our dataset.  The program should print each of the four boolean values for each person as a 4-character string using the following mapping:</p>

<table>
  <thead>
    <tr>
      <th>boolean</th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>b1</td>
      <td>YNGR</td>
      <td>OLDR</td>
    </tr>
    <tr>
      <td>b2</td>
      <td>ANDR</td>
      <td>IPHN</td>
    </tr>
    <tr>
      <td>b3</td>
      <td>NFLX</td>
      <td>HULU</td>
    </tr>
    <tr>
      <td>b4</td>
      <td>SWRS</td>
      <td>STRK</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>The program should print the “decoding” of each person on a line, starting with 4 white spaces. Here are example interactions with the program, which you should match:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">% ./hw6_ex1
Enter an integer: 512331
Binary representation: 0000 0000 0000 0111 1101 0001 0100 1011 
Semantic: 
    YNGR ANDR NFLX SWRS 
    YNGR ANDR NFLX SWRS 
    YNGR ANDR NFLX SWRS 
    YNGR IPHN HULU STRK 
    OLDR IPHN NFLX STRK 
    YNGR ANDR NFLX STRK 
    YNGR IPHN NFLX SWRS 
    OLDR ANDR HULU STRK 
% ./hw6_ex1 
Enter an integer: 257571913
Binary representation: 0000 1111 0101 1010 0011 1100 0100 1001 
Semantic: 
    YNGR ANDR NFLX SWRS 
    OLDR IPHN HULU STRK 
    YNGR IPHN NFLX STRK 
    OLDR ANDR HULU SWRS 
    YNGR ANDR HULU STRK 
    OLDR IPHN NFLX SWRS 
    YNGR IPHN NFLX SWRS 
    OLDR ANDR NFLX STRK 
% ./hw6_ex1 
Enter an integer: -1
Binary representation: 1111 1111 1111 1111 1111 1111 1111 1111 
Semantic: 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK 
    OLDR IPHN HULU STRK </code></pre></figure>

<hr />

<h4 id="question-3-counting-particular-persons-30-pts">Question #3: Counting particular persons [30 pts]</h4>

<p>Augment your program so that it prints how many persons, as encoded in the
input integer, are younger, have an iPhone, prefer Hulu, and prefer Star
Wars.  As a reference, my own solution to this question is a total of 15
lines of assembly, including all printing.</p>

<p>Here are example interactions with the program, which you should match:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">% ./hw6_ex1 
Enter an integer: 456288
Binary representation: 0000 0000 0000 0110 1111 0110 0110 0000 
Semantic: 
    YNGR ANDR NFLX SWRS 
    YNGR ANDR NFLX SWRS 
    YNGR ANDR NFLX SWRS 
    YNGR IPHN HULU SWRS 
    OLDR IPHN HULU STRK 
    YNGR IPHN HULU SWRS 
    YNGR IPHN HULU SWRS 
    YNGR ANDR NFLX SWRS 
YNGR/IPHN/HULU/SWRS count: 3
% ./hw6_ex1 
Enter an integer: 258241231
Binary representation: 0000 1111 0110 0100 0111 0010 1100 1111 
Semantic: 
    YNGR ANDR NFLX SWRS 
    OLDR IPHN HULU STRK 
    YNGR IPHN HULU SWRS 
    YNGR IPHN NFLX SWRS 
    YNGR IPHN HULU STRK 
    YNGR ANDR HULU SWRS 
    OLDR IPHN NFLX SWRS 
    OLDR IPHN HULU STRK 
YNGR/IPHN/HULU/SWRS count: 1</code></pre></figure>

<hr />

<h4 id="question-4-counting-less-specific-persons-20-pts">Question #4: Counting less specific persons [20 pts]</h4>

<p>Augment your program so that it also prints the count of persons that have
an Android Phone and prefer Star Trek  (we don’t care about their age or
their streaming service).  Here again, my own solution to this question is
a total of 15 lines of assembly, including all printing.</p>

<p>Here are example interactions with the program, which you should match:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">% ./hw6_ex1
Enter an integer: -413551222
Binary representation: 1110 0111 0101 1001 1011 0101 1000 1010 
Semantic: 
    OLDR IPHN HULU SWRS 
    YNGR IPHN HULU STRK 
    YNGR IPHN NFLX STRK 
    OLDR ANDR NFLX STRK 
    OLDR ANDR HULU STRK 
    YNGR IPHN NFLX STRK 
    OLDR ANDR NFLX SWRS 
    OLDR ANDR HULU SWRS 
YNGR/IPHN/HULU/SWRS count: 0
*/ANDR/*/STRK count: 2
% ./hw6_ex1
Enter an integer: 6403693
Binary representation: 0000 0000 0110 0001 1011 0110 0110 1101 
Semantic: 
    YNGR ANDR NFLX SWRS 
    YNGR ANDR NFLX SWRS 
    YNGR IPHN HULU SWRS 
    YNGR ANDR NFLX STRK 
    OLDR ANDR HULU STRK 
    YNGR IPHN HULU SWRS 
    YNGR IPHN HULU SWRS 
    OLDR IPHN NFLX STRK 
YNGR/IPHN/HULU/SWRS count: 3
*/ANDR/*/STRK count: 2</code></pre></figure>

<hr />


</div>




<script src="/ics312_spring2021/js/scrollIfAnchor.js"></script>

<div class="footer-background hidden-print">
  <footer>
    <div class="container page-footer">
      
      No footer page content supplied.
      
      <p style="margin: 0">Powered by the <a href="http://morea-framework.github.io/">Morea Framework</a> (Theme: cerulean)<br>
        Last update on: <span>2021-02-27 16:57:33 -1000</span></p>

      <p style="margin: 0">
        
        7 modules
        
        | 11 outcomes
        
        
        | 56 readings
        
        
        | 10 experiences
        
        
        | 17 assessments
        
      </p>
    </div>
  </footer>
</div>
</body>
</html>
